---
layout: default
---
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <article>
      <div class="container">
        <h1>A model for CDRs data: motivation, goal, idea</h1>
        <p>
          The following project aims to define a model for the <a href="http://en.wikipedia.org/wiki/Call_detail_record">Call Detail Records</a> (CDRs) data generated by the Telecom Italia cellular network.
        </p>
        <p>
          The detection of basic trends and associations on customer usage needs a cost-effective mechanism that normalize the data according to relevant space and time dependences of the service consumption.
          Moreover, the creation of a data model that can provide richer information used to make better decisions is expected to be of easy implementation, without the needs of changes or additional response time with data growth.
        </p>
        <p>
          The average dynamics of user activity during a typical working day depends mostly on spatial factors (as the population density) and on temporal factors (awakening and lunchtime for example). Their contributions on the user activity recorded on CDRs data are superimposed and variable during the day and over the space. The goal of the proposal is to find a way to uncouple the aforementioned factors, so to define a model able to answer at questions like the following: <em>How does the spatial factor change on time?</em> and <em>How does the temporal factor change over space?</em>
        </p>
        <p>
          The idea is to formulate a oversimplified model with a spatial factor constant on time and a temporal factor constant over space. Show that the model is a good candidate to describe the user activity dynamics during the typical working day, then describe the difference between the simplified model and the CDRs data adding temporal dependence to the spatial factor or spatial dependence to the temporal factor
        </p>
        <h2>The data</h2>
        <p>
          Received SMS <a href="http://en.wikipedia.org/wiki/Call_detail_record">Call Detail Records</a> (CDRs) generated by the Telecom Italia cellular network over the city of Milano.
          The CDRs considered are the following: 100*100 CDRs (the Milano grid) every 10 minutes (144 intervals a day) every working-day between November 1st 2013 to December 23th 2013 (37 days).
          In total: 100*100*144*37 = 53280000 CDRs.
          Of every CDR, only its value, the cell and the time have been considered.
        </p>
        <h2>The model</h2>
        <p>
          Let \(c(i,t)\) the CDRs data associated to cell \(i\) at time \(t\). Then we define \(C(i,t)\) as the mean of the \(c(i,t)\) values calculated over the 37 working days considered. In other words

          $$
          C(i,t) = \frac{1}{n+1}\sum_r c(i,r)
          $$

          where \(r = t, t + 144, t + 2 \times 144, ... , t + n \times 144\) and \(n+1\) are the number of working days taken into account (144 are the number of 10 minutes intervals in a day).
        </p>
        <p>
          The observables \(C(i,t)\) describe the average dynamics of user activity during a typical working day and they depends mostly on spatial factors (as the population density) and on temporal factors (awakening and lunchtime for example). Then we formulate a simplified model with a spatial factor constant on time and a temporal factor constant over space, in formula we write \(C(i,t)\) as
          $$
          C(i,t) = A(t) D(i)
          $$
          where \(A(t)\) and \(D(i)\) are the temporal and spatial factors aforementioned. Note that \(A(t)\) does not depend on the spatial variable \(i\) and \(D(i)\) does not depend on the temporal variable \(t\).
        </p>
        <h2>Consistence with the data</h2>
        <p>
          We show that the model is a good candidate to describe the user activity dynamics during the typical working day. First note that
          $$
          \sum_k C(k,t) = A(t) \sum_k D(k) \propto A(t) \\
          \sum_r C(i,r) = D(i) \sum_r A(r) \propto D(i)
          $$
          Then we have
          $$
          C(i,t) \propto \sum_k C(k,t) \sum_r C(i,r)
          $$
        </p>
        <p>
          Let define the random variable \(V(i,t;j,s)\) as
          $$
          V(i,t;j,s) = \frac{C(i,t)}{C(j,s)} - \frac{\sum_k C(k,t) \sum_r C(i,r)}{\sum_k C(k,s) \sum_r C(j,r)}
          $$
        </p>
        <p>
          The above variable \(V(i,t;j,s)\) could be easily calculated from the CDRs data and its distribution is expected to be narrow and centered around zero. Fig. 1. shows that this is actual the case.
          <figure class="small">
            <img src="../assets/imgs/tdc/fig1.svg" alt="Fig. 1"></img>
            <figcaption>
              <strong>Fig. 1</strong>: The distribution of the random variable \(V(i,t;j,s)\) is tight and around zero.
            </figcaption>
          </figure>
        </p>
        <h3>Comparison with random data</h3>
        <p>
          CDRs data are real numbers greater than zero. The following figure shows the distribution of \(V(i,t;j,s)\) calculated after the substitution of CDRs data with random numbers in the interval \([0,1]\), note that the distribution is different from Fig. 1.
          <figure class="small">
          <img src="../assets/imgs/tdc/fig1.1.svg" alt="Fig. 1"></img>
            <figcaption>
              The distribution of \(V(i,t;j,s)\) with \(C(i,t)\) random numbers in \([0,1]\).
            </figcaption>
          </figure>
        </p>
        <h2>Enhance the model</h2>
        <h3>Add temporal dependence to the spatial factor</h3>
        <p>
          The model becomes
          $$
          C(i,t) = A(t) D(i,t)
          $$
          The spatial factor \(D(i,t)\) can be written in terms of the CDRs data by means of the following reasoning.
          First, eliminate the factor \(A(t)\) by integration over \(i\)
          $$
          \frac{C(i,t)}{\sum_k C(k,t)} = \frac{D(i,t)}{\sum_k D(k,t)}
          $$
          then, under the assumption that the quantity \(\sum_k D(k,t)\) does not depend on time \(t\), we can write
          $$
          D(i,t) \propto \frac{C(i,t)}{\sum_k C(k,t)}
          $$
          Th above assumption generally holds under restrictive border conditions, in our case we are assuming that the Milano grid is wide enough that the dynamics inside the grid could be considered independent from the dynamics outside the grid.
        <h3>Add spatial dependence to the temporal factor</h3>
        <p>
          Following the same reasoning as above, with the only difference that the enhanced model is now \(C(i,t) = A(i,t) D(i)\), by integration over the temporal variable \(t\) and under the assumption that
          \(\sum_r A(i,r)\) does not depend on \(i\), we have
          $$
          A(i,t) \propto \frac{C(i,t)}{\sum_r C(i,r)}
          $$
        </p>
        <h2>Results</h2>
        <p>
          The model \(C(i,t) = A(t) D(i)\) well describes the overall dynamics emerging from CDRs data and it could be used as starting point for further enhancements. In particular, the factors \(D(i)\) and \(A(t)\) are expected to vary on time and space respectively and such dependence can be dealt with separately by means of CDRs data only. Figures 2 and 3 show the distributions of the variables \(A(i,t)\) and \(D(i,t)\).
          <figure class="small">
            <img src="../assets/imgs/tdc/fig2.svg" alt="Fig. 2"></img>
            <figcaption><strong>Fig. 2</strong>: The distribution of the random variable \(A(i,t)\). The two peaks are a conseguence of the daytime/nightime cicle.</figcaption>
          </figure>
          <figure class="small">
            <img src="../assets/imgs/tdc/fig3.svg" alt="Fig. 3"></img>
            <figcaption><strong>Fig. 3</strong>: The distribution of the variable \(D(i,t)\).</figcaption>
          </figure>
        </p>
        <p>
          Spatial patterns on variable \(D(i,t)\) are expected, much more interesting are temporal patterns emerging during the whole working day. Figures 4 to 7 show the cells with \(D(i,t) > w\), where \(w\) is a cutoff value, at different times, note that the spatial distributions are different.
          <figure class="small">
            <img src="../assets/imgs/tdc/Dsnap40.png" alt="Fig. 4">
            <figcaption><strong>Fig. 4</strong>: Snapshot of the Milano grid taken at time 6:40. Cells with \(0.0004 > D(i,t) > 0.0006\) are colored.</figcaption>
          </figure>

          <figure class="small">
            <img src="../assets/imgs/tdc/Dsnap60.png" alt="Fig. 5">
            <figcaption><strong>Fig. 5</strong>: Snapshot of the Milano grid taken at time 10:00. Cells with \(0.0004 > D(i,t) > 0.0006\) are colored.</figcaption>
          </figure>

          <figure class="small">
            <img src="../assets/imgs/tdc/Dsnap80.png" alt="Fig. 6">
            <figcaption><strong>Fig. 6</strong>: Snapshot of the Milano grid taken at time 13:20. Cells with \(0.0004 > D(i,t) > 0.0006\) are colored.</figcaption>
          </figure>

          <figure class="small">
            <img src="../assets/imgs/tdc/Dsnap130.png" alt="Fig. 7">
            <figcaption><strong>Fig. 7</strong>: Snapshot of the Milano grid taken at time 21:40. Cells with \(0.0004 > D(i,t) > 0.0006\) are colored.</figcaption>
          </figure>

        </p>
        <p>
          Vice versa, temporal patterns on variable \(A(i,t)\) are expected, whereas spatial patterns on the Milano grid are not trivial. Figures 8 to 10 show the cells with \(p > A(i,t) > q\) at different times, note the presence of spatial clusters.


          <figure class="small">
            <img src="../assets/imgs/tdc/Asnap60.png" alt="Fig. 8">
            <figcaption><strong>Fig. 8</strong>: Snapshot of the Milano grid taken at time 10:00. Cells with \(0.0145 > A(i,t) > 0.0155\) are colored.</figcaption>
          </figure>


          <figure class="small">
            <img src="../assets/imgs/tdc/Asnap80.png" alt="Fig. 9">
            <figcaption><strong>Fig. 9</strong>: Snapshot of the Milano grid taken at time 13:20. Cells with \(0.0145 > A(i,t) > 0.0155\) are colored.</figcaption>
          </figure>

          <figure class="small">
            <img src="../assets/imgs/tdc/Asnap110.png" alt="Fig. 10">
            <figcaption><strong>Fig. 10</strong>: Snapshot of the Milano grid taken at time 18:20. Cells with \(0.0145 > A(i,t) > 0.0155\) are colored.</figcaption>
          </figure>

        </p>
        <h2>Inpact and future evolution</h2>
        <p>
          The proposed normalization mechanism is at the base of further analysis targeted to find patterns of the user behaviour throughout the working-day, and helpful in accurate operational planning like <em>network dynamic congestion control</em>, <em>cell-site optimization</em> and <em>intelligent network planning</em>.
          The ability to create "what if" scenarios based on past trends helps to anticipate and implement necessary network change just ahead of demand curve, prioritize and optimize network investment plan based on service forecast demands.
        </p>
        <p>
          The model is based on CDRs data, i.e. on data that describes the user activity. Then the model could be improved by the availability of data regarding the user inactivity, in other words the knowledge of the ratio between active users and total users permits a significant enhancement on the interpretation of the model. At the present state indeed the model does not give indication of which of the alternative variables, \(A(i,t)\) or \(D(i,t)\), better express the user behaviour at the given space and time coordinates.
        </p>
        <p>
          Moreover, in the present analysis it remains to identify geographical regions of interest according to the space-time dynamics of variables \(A(i,t)\) and \(D(i,t)\).
        </p>
      </div>
    </article>
